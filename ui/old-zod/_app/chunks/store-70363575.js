var e=Object.defineProperty,n=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(n,a,t)=>a in n?e(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,i=(e,n)=>{for(var a in n||(n={}))o.call(n,a)&&s(e,a,n[a]);if(t)for(var a of t(n))c.call(n,a)&&s(e,a,n[a]);return e},r=(e,t)=>n(e,a(t));import{C as l}from"./vendor-aa83d449.js";const p={chats:[],connection:"disconnected",canvasList:[],name:"welcome",ship:window.ship,width:1500,height:1e3,gcp:null,s3:{configuration:{buckets:new Set,currentBucket:""},credentials:null}},{subscribe:u,update:d}=l(p);function f(e){console.log("[createCanvasStore]",e),d((n=>r(i({},n),{canvas:e,canvasList:Object.keys(e).filter((e=>"welcome"!==e))})))}function m(e){(function(e){return"string"==typeof e.accessKey&&"number"==typeof e.expiresIn})(e)&&(console.log("[loadGCPToken]",e),d((n=>r(i({},n),{gcp:{gcpToken:e}}))))}function b(e){console.log("[loadCanvas]",e,e.name),d((n=>r(i({},n),{canvas:i({[e.name]:{metadata:{name:e.name,template:e.template,location:e.location,saved:e.saved,width:e.width,height:e.height,private:e.private},data:e.data}},n.canvas),name:e.name,canvasList:[e.name,...n.canvasList]})))}function v(e){console.log("[painting]",e),d((n=>(e.strokes.forEach((a=>{console.log(a),n.canvas[e.name].data[a.id]=i({},a)})),n)))}function g(e){d((n=>r(i({},n),{connection:e})))}function h(e){d((n=>r(i({},n),{api:e})))}function w(e){d((n=>r(i({},n),{subscription:e})))}function y(e){console.log(e),d((n=>r(i({},n),{name:e})))}var O={subscribe:u};export{O as a,h as b,f as c,w as d,y as e,b as l,v as p,m as s,g as u};

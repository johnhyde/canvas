import{S as t,i as e,s as n,M as a,c as o,a as s,d as r,b as $,N as c,f as l,O as i,L as f,P as m,Q as g,R as h,T as d,l as p,U as u,V as v,W as w,X as x,v as y,j as b,m as k,o as M,Y as C,r as S,w as E,B as j,u as N,Z as O,k as T,n as L,G as P,$ as I,a0 as B,a1 as z,a2 as G,a3 as H,a4 as R,a5 as _,a6 as A,t as V,g as D,a7 as Y,a8 as q,a9 as Q,aa as U,ab as W,ac as X,e as Z,ad as F,ae as J,af as K,ag as tt}from"../chunks/vendor-4a259baa.js";import{a as et}from"../chunks/store-d13b1474.js";import{r as nt,b as at}from"../chunks/paths-7dc55c62.js";function ot(t,e,n){const{x:a,y:o}=function(t,e){return{x:Math.floor(t/e),y:t%e}}(t,e);return Math.floor(function(t,e,n){return n*t+e}(a,o+0,n))}function st(t){let e,n,g,h,d;return{c(){e=a("path"),this.h()},l(t){e=o(t,"path",{d:!0,fill:!0,class:!0},1),s(e).forEach(r),this.h()},h(){$(e,"d",n=t[2](c(t[0],t[1]))),$(e,"fill",g=t[1].attr&&t[1].attr.fill?t[1].attr.color:void 0),$(e,"class","svelte-td270i")},m(n,a){l(n,e,a),h||(d=[i(e,"mousedown",t[3]),i(e,"mouseup",t[5]),i(e,"mousemove",t[4])],h=!0)},p(t,[a]){3&a&&n!==(n=t[2](c(t[0],t[1])))&&$(e,"d",n),2&a&&g!==(g=t[1].attr&&t[1].attr.fill?t[1].attr.color:void 0)&&$(e,"fill",g)},i:f,o:f,d(t){t&&r(e),h=!1,m(d)}}}function rt(t,e,n){let a,{topology:o}=e,{d:s}=e,{selectedColor:r}=e,{mousing:$}=e;const c=g(),l=function(t){const e=2*t*Math.sin(Math.PI/3),n=1.5*t;return{stream:function(t){return{point:function(a,o){t.point(a*e/2,(o-(2-(1&o))/3)*n/2)},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}}(10),i=h().projection(l);function f(){if($){const t=$>0;c("update",{id:s.id,data:{fill:t,color:t?a:void 0}}),0!==$&&c("save",{id:s.id,fill:t,color:$>0?a:""})}}return t.$$set=t=>{"topology"in t&&n(0,o=t.topology),"d"in t&&n(1,s=t.d),"selectedColor"in t&&n(7,r=t.selectedColor),"mousing"in t&&n(6,$=t.mousing)},t.$$.update=()=>{128&t.$$.dirty&&(a=d(r).formatHex())},[o,s,i,function(t){3!==t.which&&(n(6,$=s.attr.fill&&s.attr.color===a?-1:1),f())},f,function(){f(),n(6,$=0),c("flush")},$,r]}class $t extends t{constructor(t){super(),e(this,t,rt,st,n,{topology:0,d:1,selectedColor:7,mousing:6})}}function ct(t,e,n){const a=t.slice();return a[7]=e[n],a}function lt(t){let e,n,c,f,m,g;function h(){return t[5](t[7])}return{c(){e=a("rect"),this.h()},l(t){e=o(t,"rect",{x:!0,width:!0,height:!0,stroke:!0,fill:!0},1),s(e).forEach(r),this.h()},h(){$(e,"x",n=t[7]<9?24*t[7]:24*(t[7]+1)),$(e,"width","21"),$(e,"height","21"),$(e,"stroke",c=t[7]===t[1]?"#000":"gray"),$(e,"fill",f=t[7]<9?t[2](t[7]):t[3](t[7]))},m(t,n){l(t,e,n),m||(g=i(e,"click",h),m=!0)},p(a,o){t=a,1&o&&n!==(n=t[7]<9?24*t[7]:24*(t[7]+1))&&$(e,"x",n),3&o&&c!==(c=t[7]===t[1]?"#000":"gray")&&$(e,"stroke",c),1&o&&f!==(f=t[7]<9?t[2](t[7]):t[3](t[7]))&&$(e,"fill",f)},d(t){t&&r(e),m=!1,g()}}}function it(t){let e,n=t[0],a=[];for(let o=0;o<n.length;o+=1)a[o]=lt(ct(t,n,o));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=p()},l(t){for(let e=0;e<a.length;e+=1)a[e].l(t);e=p()},m(t,n){for(let e=0;e<a.length;e+=1)a[e].m(t,n);l(t,e,n)},p(t,[o]){if(31&o){let s;for(n=t[0],s=0;s<n.length;s+=1){const r=ct(t,n,s);a[s]?a[s].p(r,o):(a[s]=lt(r),a[s].c(),a[s].m(e.parentNode,e))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}},i:f,o:f,d(t){u(a,t),t&&r(e)}}}function ft(t,e,n){let{colors:a}=e,o=0;const s=g(),r=v().domain(w(9)).range(["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"]),$=v().domain(w(9)).range(x[9]);function c(t){n(1,o=t),s("color",{color:t<9?r(t):$(t)})}return t.$$set=t=>{"colors"in t&&n(0,a=t.colors)},[a,o,r,$,c,t=>c(t)]}class mt extends t{constructor(t){super(),e(this,t,ft,it,n,{colors:0})}}function gt(t,e,n){const a=t.slice();return a[23]=e[n],a[24]=e,a[25]=n,a}function ht(t){let e,n,a=t[3],o=[];for(let r=0;r<a.length;r+=1)o[r]=dt(gt(t,a,r));const s=t=>S(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=p()},l(t){for(let e=0;e<o.length;e+=1)o[e].l(t);e=p()},m(t,a){for(let e=0;e<o.length;e+=1)o[e].m(t,a);l(t,e,a),n=!0},p(t,n){if(3740&n){let r;for(a=t[3],r=0;r<a.length;r+=1){const s=gt(t,a,r);o[r]?(o[r].p(s,n),y(o[r],1)):(o[r]=dt(s),o[r].c(),y(o[r],1),o[r].m(e.parentNode,e))}for(j(),r=a.length;r<o.length;r+=1)s(r);N()}},i(t){if(!n){for(let t=0;t<a.length;t+=1)y(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)S(o[e]);n=!1},d(t){u(o,t),t&&r(e)}}}function dt(t){let e,n,a,o,s,r;function $(e){t[14](e)}function c(e){t[15](e,t[23],t[24],t[25])}function l(e){t[16](e)}function i(e){t[17](e)}let f={};return void 0!==t[2]&&(f.topology=t[2]),void 0!==t[23]&&(f.d=t[23]),void 0!==t[7]&&(f.selectedColor=t[7]),void 0!==t[4]&&(f.mousing=t[4]),e=new $t({props:f}),B.push((()=>z(e,"topology",$))),B.push((()=>z(e,"d",c))),B.push((()=>z(e,"selectedColor",l))),B.push((()=>z(e,"mousing",i))),e.$on("update",t[9]),e.$on("save",t[10]),e.$on("flush",t[11]),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,n){M(e,t,n),r=!0},p(r,$){t=r;const c={};!n&&4&$&&(n=!0,c.topology=t[2],C((()=>n=!1))),!a&&8&$&&(a=!0,c.d=t[23],C((()=>a=!1))),!o&&128&$&&(o=!0,c.selectedColor=t[7],C((()=>o=!1))),!s&&16&$&&(s=!0,c.mousing=t[4],C((()=>s=!1))),e.$set(c)},i(t){r||(y(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function pt(t){let e,n,c,i,f;function m(e){t[18](e)}let g={};return void 0!==t[5]&&(g.colors=t[5]),n=new mt({props:g}),B.push((()=>z(n,"colors",m))),n.$on("color",t[12]),{c(){e=a("g"),b(n.$$.fragment),this.h()},l(t){e=o(t,"g",{class:!0,transform:!0},1);var a=s(e);k(n.$$.fragment,a),a.forEach(r),this.h()},h(){$(e,"class","palette svelte-1bkwhko"),$(e,"transform",i=`translate(${t[0]/2-216-3}, ${2.5*xt})`)},m(t,a){l(t,e,a),M(n,e,null),f=!0},p(t,a){const o={};!c&&32&a&&(c=!0,o.colors=t[5],C((()=>c=!1))),n.$set(o),(!f||1&a&&i!==(i=`translate(${t[0]/2-216-3}, ${2.5*xt})`))&&$(e,"transform",i)},i(t){f||(y(n.$$.fragment,t),f=!0)},o(t){S(n.$$.fragment,t),f=!1},d(t){t&&r(e),E(n)}}}function ut(t){let e,n,a,o;return e=new G({props:{indented:!0,labelText:"Export canvas..."}}),e.$on("click",t[20]),a=new H({}),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment)},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t)},m(t,s){M(e,t,s),l(t,n,s),M(a,t,s),o=!0},p:f,i(t){o||(y(e.$$.fragment,t),y(a.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),o=!1},d(t){E(e,t),t&&r(n),E(a,t)}}}function vt(t){let e,n,a,o=(t[8].gcp||t[8].s3.credentials)&&ut(t);return n=new G({props:{labelText:"Show color palette",selected:t[6]}}),n.$on("click",t[21]),{c(){o&&o.c(),e=T(),b(n.$$.fragment)},l(t){o&&o.l(t),e=L(t),k(n.$$.fragment,t)},m(t,s){o&&o.m(t,s),l(t,e,s),M(n,t,s),a=!0},p(t,a){t[8].gcp||t[8].s3.credentials?o?(o.p(t,a),256&a&&y(o,1)):(o=ut(t),o.c(),y(o,1),o.m(e.parentNode,e)):o&&(j(),S(o,1,1,(()=>{o=null})),N());const s={};64&a&&(s.selected=t[6]),n.$set(s)},i(t){a||(y(o),y(n.$$.fragment,t),a=!0)},o(t){S(o),S(n.$$.fragment,t),a=!1},d(t){o&&o.d(t),t&&r(e),E(n,t)}}}function wt(t){let e,n,c,f,m,g,h,d,p,u,v=t[3]&&t[2]&&ht(t),w=t[6]&&pt(t);return h=new O({props:{$$slots:{default:[vt]},$$scope:{ctx:t}}}),{c(){e=a("svg"),n=a("g"),v&&v.c(),w&&w.c(),c=a("rect"),g=T(),b(h.$$.fragment),this.h()},l(t){e=o(t,"svg",{width:!0,height:!0,id:!0,viewBox:!0,preserveAspectRatio:!0,class:!0},1);var a=s(e);n=o(a,"g",{class:!0,transform:!0},1);var $=s(n);v&&v.l($),$.forEach(r),w&&w.l(a),c=o(a,"rect",{width:!0,height:!0,class:!0},1),s(c).forEach(r),a.forEach(r),g=L(t),k(h.$$.fragment,t),this.h()},h(){$(n,"class","hexagon svelte-1bkwhko"),$(n,"transform",`translate(${xt}, ${xt})`),$(c,"width",t[0]),$(c,"height",f=t[1]+2.5*xt),$(c,"class","border svelte-1bkwhko"),$(e,"width",t[0]),$(e,"height",t[1]),$(e,"id","canvas"),$(e,"viewBox",m=`0 0 ${t[0]} ${t[1]+2.5*xt}`),$(e,"preserveAspectRatio","xMaxYMin meet"),$(e,"class","svelte-1bkwhko")},m(a,o){l(a,e,o),P(e,n),v&&v.m(n,null),w&&w.m(e,null),P(e,c),l(a,g,o),M(h,a,o),d=!0,p||(u=i(e,"mouseleave",t[19]),p=!0)},p(t,[a]){t[3]&&t[2]?v?(v.p(t,a),12&a&&y(v,1)):(v=ht(t),v.c(),y(v,1),v.m(n,null)):v&&(j(),S(v,1,1,(()=>{v=null})),N()),t[6]?w?(w.p(t,a),64&a&&y(w,1)):(w=pt(t),w.c(),y(w,1),w.m(e,c)):w&&(j(),S(w,1,1,(()=>{w=null})),N()),(!d||1&a)&&$(c,"width",t[0]),(!d||2&a&&f!==(f=t[1]+2.5*xt))&&$(c,"height",f),(!d||1&a)&&$(e,"width",t[0]),(!d||2&a)&&$(e,"height",t[1]),(!d||3&a&&m!==(m=`0 0 ${t[0]} ${t[1]+2.5*xt}`))&&$(e,"viewBox",m);const o={};67109184&a&&(o.$$scope={dirty:a,ctx:t}),h.$set(o)},i(t){d||(y(v),y(w),y(h.$$.fragment,t),d=!0)},o(t){S(v),S(w),S(h.$$.fragment,t),d=!1},d(t){t&&r(e),v&&v.d(),w&&w.d(),t&&r(g),E(h,t),p=!1,u()}}}const xt=10;function yt(t,e,n){let a;I(t,et,(t=>n(8,a=t)));let o,s,{width:r}=e,{height:$}=e,{canvas:c}=e,l={},i=0,f=w(18),m=!0,g="#d53e4f";return t.$$set=t=>{"width"in t&&n(0,r=t.width),"height"in t&&n(1,$=t.height),"canvas"in t&&n(13,c=t.canvas)},t.$$.update=()=>{8199&t.$$.dirty&&c.data&&(n(2,s=function(t,e,n,a,o,s){const r=2*e*Math.sin(Math.PI/3),$=1.5*e,c=Math.ceil((a+e)/$)+1,l=Math.ceil(n/r)+1,i=s?Math.ceil(s/r)+1:n,f=[],m=[];let g=0;for(let p=-1;p<=c;++p)for(let t=-1;t<=l;++t){const e=2*p,n=2*(t+(1&p)/2);m.push([[n,e-1],[1,1]],[[n+1,e],[0,1]],[[n+1,e+1],[-1,1]])}const h=Object.keys(o),d={};h.map((t=>{s&&n!==s?d[ot(t,i,l)]=t:d[t]=t}));for(let p=0,u=3;p<c;++p,u+=6)for(let e=0;e<l;++e,u+=3)f.push({id:g.toString(),name:t,type:"Polygon",arcs:[[u,u+1,u+2,~(u+3*(l+2-(1&p))),~(u-2),~(u-3*(l+2+(1&p))+2)]],attr:o&&o[d[g]]||{}}),++g;return{transform:{translate:[0,0],scale:[1,1]},objects:{hexagons:{type:"GeometryCollection",geometries:f}},arcs:m}}(c.metadata.name,xt,r,$,c.data,c.metadata.width)),n(3,o=s.objects.hexagons.geometries))},[r,$,s,o,i,f,m,g,a,function(t){n(13,c.data[t.detail.id]=t.detail.data,c)},function(t){const{id:e,fill:n,color:a}=t.detail;l[e]={mesh:{id:e,fill:n,color:a}}},function(){const t=Object.values(l),{location:e,name:n}=c.metadata;t.length>0&&"mesh-welcome"!==c.metadata.template&&a.api.send(e,n,t),l={}},function(t){n(7,g=t.detail.color)},c,function(t){s=t,n(2,s),n(13,c),n(0,r),n(1,$)},function(t,e,a,l){a[l]=t,n(3,o),n(13,c),n(0,r),n(1,$),n(2,s)},function(t){g=t,n(7,g)},function(t){i=t,n(4,i)},function(t){f=t,n(5,f)},()=>{n(4,i=0)},()=>console.log("exporting"),()=>n(6,m=!m)]}class bt extends t{constructor(t){super(),e(this,t,yt,wt,n,{width:0,height:1,canvas:13})}}const kt=async function(t,e){return nt.goto(t,e,[])};function Mt(t,e,n){const a=t.slice();return a[12]=e[n],a}function Ct(t){let e;return{c(){e=V("Create Canvas")},l(t){e=D(t,"Create Canvas")},m(t,n){l(t,e,n)},d(t){t&&r(e)}}}function St(t){let e,n,a,o;return e=new W({props:{type:"name",name:"name"}}),a=new X({props:{name:"name",as:"span"}}),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment)},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t)},m(t,s){M(e,t,s),l(t,n,s),M(a,t,s),o=!0},p:f,i(t){o||(y(e.$$.fragment,t),y(a.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),o=!1},d(t){E(e,t),t&&r(n),E(a,t)}}}function Et(t){let e,n,a,o,s,$,c,i;return e=new W({props:{as:"TextInput",type:"number",name:"width"}}),a=new W({props:{as:"TextInput",type:"number",name:"height"}}),s=new X({props:{name:"width",as:"div"}}),c=new X({props:{name:"height",as:"div"}}),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment),o=T(),b(s.$$.fragment),$=T(),b(c.$$.fragment)},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t),o=L(t),k(s.$$.fragment,t),$=L(t),k(c.$$.fragment,t)},m(t,r){M(e,t,r),l(t,n,r),M(a,t,r),l(t,o,r),M(s,t,r),l(t,$,r),M(c,t,r),i=!0},p:f,i(t){i||(y(e.$$.fragment,t),y(a.$$.fragment,t),y(s.$$.fragment,t),y(c.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),S(s.$$.fragment,t),S(c.$$.fragment,t),i=!1},d(t){E(e,t),t&&r(n),E(a,t),t&&r(o),E(s,t),t&&r($),E(c,t)}}}function jt(t){let e,n,a,$=t[12]+"";return{c(){e=Z("option"),n=V($),a=T(),this.h()},l(t){e=o(t,"OPTION",{value:!0});var c=s(e);n=D(c,$),a=L(c),c.forEach(r),this.h()},h(){e.__value=t[12],e.value=e.__value},m(t,o){l(t,e,o),P(e,n),P(e,a)},p:f,d(t){t&&r(e)}}}function Nt(t){let e,n=Object.keys(t[1]),a=[];for(let o=0;o<n.length;o+=1)a[o]=jt(Mt(t,n,o));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();e=p()},l(t){for(let e=0;e<a.length;e+=1)a[e].l(t);e=p()},m(t,n){for(let e=0;e<a.length;e+=1)a[e].m(t,n);l(t,e,n)},p(t,o){if(2&o){let s;for(n=Object.keys(t[1]),s=0;s<n.length;s+=1){const r=Mt(t,n,s);a[s]?a[s].p(r,o):(a[s]=jt(r),a[s].c(),a[s].m(e.parentNode,e))}for(;s<a.length;s+=1)a[s].d(1);a.length=n.length}},d(t){u(a,t),t&&r(e)}}}function Ot(t){let e,n,a,$,c,i,f;return e=new W({props:{as:"select",name:"template",$$slots:{default:[Nt]},$$scope:{ctx:t}}}),a=new W({props:{type:"checkbox",name:"private",checked:!0}}),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment),$=T(),c=Z("span"),i=V("Private")},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t),$=L(t),c=o(t,"SPAN",{});var l=s(c);i=D(l,"Private"),l.forEach(r)},m(t,o){M(e,t,o),l(t,n,o),M(a,t,o),l(t,$,o),l(t,c,o),P(c,i),f=!0},p(t,n){const a={};32768&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){f||(y(e.$$.fragment,t),y(a.$$.fragment,t),f=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),f=!1},d(t){E(e,t),t&&r(n),E(a,t),t&&r($),t&&r(c)}}}function Tt(t){let e;return{c(){e=V("Submit")},l(t){e=D(t,"Submit")},m(t,n){l(t,e,n)},d(t){t&&r(e)}}}function Lt(t){let e,n,a,o,s,$,c,i;return e=new U({props:{legendText:"Name",$$slots:{default:[St]},$$scope:{ctx:t}}}),a=new U({props:{legendText:"Dimensions",$$slots:{default:[Et]},$$scope:{ctx:t}}}),s=new U({props:{legendText:"Options",$$slots:{default:[Ot]},$$scope:{ctx:t}}}),c=new R({props:{size:"small",type:"submit",disabled:t[11],$$slots:{default:[Tt]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment),o=T(),b(s.$$.fragment),$=T(),b(c.$$.fragment)},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t),o=L(t),k(s.$$.fragment,t),$=L(t),k(c.$$.fragment,t)},m(t,r){M(e,t,r),l(t,n,r),M(a,t,r),l(t,o,r),M(s,t,r),l(t,$,r),M(c,t,r),i=!0},p(t,n){const o={};32768&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const r={};32768&n&&(r.$$scope={dirty:n,ctx:t}),a.$set(r);const $={};32768&n&&($.$$scope={dirty:n,ctx:t}),s.$set($);const l={};2048&n&&(l.disabled=t[11]),32768&n&&(l.$$scope={dirty:n,ctx:t}),c.$set(l)},i(t){i||(y(e.$$.fragment,t),y(a.$$.fragment,t),y(s.$$.fragment,t),y(c.$$.fragment,t),i=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),S(s.$$.fragment,t),S(c.$$.fragment,t),i=!1},d(t){E(e,t),t&&r(n),E(a,t),t&&r(o),E(s,t),t&&r($),E(c,t)}}}function Pt(t){let e,n;return e=new Q({props:{$$slots:{default:[Lt]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p(t,n){const a={};34816&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function It(t){let e,n;return e=new q({props:{initialValues:t[2],validate:t[3],onSubmit:t[4],$$slots:{default:[Pt,({isSubmitting:t})=>({11:t}),({isSubmitting:t})=>t?2048:0]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p(t,n){const a={};34816&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Bt(t){let e,n,a,o,s;function $(e){t[6](e)}e=new R({props:{icon:_,kind:"ghost",size:"small",$$slots:{default:[Ct]},$$scope:{ctx:t}}}),e.$on("click",t[5]);let c={size:"xs",passiveModal:!0,modalHeading:"Create new canvas",$$slots:{default:[It]},$$scope:{ctx:t}};return void 0!==t[0]&&(c.open=t[0]),a=new A({props:c}),B.push((()=>z(a,"open",$))),a.$on("click:button--secondary",t[7]),a.$on("open",t[8]),a.$on("close",t[9]),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment)},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t)},m(t,o){M(e,t,o),l(t,n,o),M(a,t,o),s=!0},p(t,[n]){const s={};32768&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s);const r={};32768&n&&(r.$$scope={dirty:n,ctx:t}),!o&&1&n&&(o=!0,r.open=t[0],C((()=>o=!1))),a.$set(r)},i(t){s||(y(e.$$.fragment,t),y(a.$$.fragment,t),s=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),s=!1},d(t){E(e,t),t&&r(n),E(a,t)}}}function zt(t,e,n){let a;I(t,et,(t=>n(10,a=t)));let o=!1;return[o,{mesh:"Hexagon Mesh","mesh-welcome":"Canvas Logo","mesh-bitcoin":"Bitcoin","mesh-sigil":"Sigil","mesh-martian":"Martian","mesh-crypto":"Cryptonomicon","mesh-yc-hn":"Hacker News","mesh-tile":"Easel","mesh-guy":"Guybrush Threepwood","mesh-life":"Other Life","mesh-public":"Public Moon"},{name:"",private:!0,template:"mesh",width:1500,height:1e3},t=>{const e={name:"",width:"",height:""};return""===t.name&&(e.name="Name Required"),t.width<648&&(e.width="Min width 648"),t.width>1500&&(e.width="Max width 1500"),t.height<648&&(e.height="Min height 648"),t.height>1e3&&(e.height="Max height 1000"),console.log(e),e},(t,{setSubmitting:e})=>{console.log("[ creating canvas... ]"),a.api.create(t.name,"~"+a.ship,t.template,t.private,t.width,t.height).then((n=>{console.log("done",n),e(!1),kt(`${at}/c/${t.name}`)}))},()=>n(0,o=!0),function(t){o=t,n(0,o)},()=>n(0,o=!1),function(e){Y(t,e)},function(e){Y(t,e)}]}class Gt extends t{constructor(t){super(),e(this,t,zt,Bt,n,{})}}function Ht(t){let e,n;return e=new K({props:{size:"sm",type:"inline",name:"Choose",label:"Open",items:t[1].canvasList.map(Qt)}}),e.$on("select",t[2]),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p(t,n){const a={};2&n&&(a.items=t[1].canvasList.map(Qt)),e.$set(a)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Rt(t){let e,n,a,o;e=new Gt({});let s=t[1].canvasList&&t[1].canvasList.length>0&&Ht(t);return{c(){b(e.$$.fragment),n=T(),s&&s.c(),a=p()},l(t){k(e.$$.fragment,t),n=L(t),s&&s.l(t),a=p()},m(t,r){M(e,t,r),l(t,n,r),s&&s.m(t,r),l(t,a,r),o=!0},p(t,e){t[1].canvasList&&t[1].canvasList.length>0?s?(s.p(t,e),2&e&&y(s,1)):(s=Ht(t),s.c(),y(s,1),s.m(a.parentNode,a)):s&&(j(),S(s,1,1,(()=>{s=null})),N())},i(t){o||(y(e.$$.fragment,t),y(s),o=!0)},o(t){S(e.$$.fragment,t),S(s),o=!1},d(t){E(e,t),t&&r(n),s&&s.d(t),t&&r(a)}}}function _t(t){let e,n;return e=new J({props:{$$slots:{default:[Rt]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p(t,n){const a={};11&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function At(t){let e,n;return e=new tt({props:{small:!0}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p:f,i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Vt(t){let e,n;return e=new bt({props:{canvas:t[1].canvas[t[0]],width:t[1].canvas[t[0]].metadata.width,height:t[1].canvas[t[0]].metadata.height}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p(t,n){const a={};3&n&&(a.canvas=t[1].canvas[t[0]]),3&n&&(a.width=t[1].canvas[t[0]].metadata.width),3&n&&(a.height=t[1].canvas[t[0]].metadata.height),e.$set(a)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function Dt(t){let e,n,a,c;const i=[Vt,At],f=[];function m(t,e){return t[1].canvas&&t[1].canvas[t[0]]?0:1}return n=m(t),a=f[n]=i[n](t),{c(){e=Z("div"),a.c(),this.h()},l(t){e=o(t,"DIV",{class:!0});var n=s(e);a.l(n),n.forEach(r),this.h()},h(){$(e,"class","svelte-13zkok0")},m(t,a){l(t,e,a),f[n].m(e,null),c=!0},p(t,o){let s=n;n=m(t),n===s?f[n].p(t,o):(j(),S(f[s],1,1,(()=>{f[s]=null})),N(),a=f[n],a?a.p(t,o):(a=f[n]=i[n](t),a.c()),y(a,1),a.m(e,null))},i(t){c||(y(a),c=!0)},o(t){S(a),c=!1},d(t){t&&r(e),f[n].d()}}}function Yt(t){let e,n;return e=new J({props:{$$slots:{default:[Dt]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,a){M(e,t,a),n=!0},p(t,n){const a={};11&n&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){S(e.$$.fragment,t),n=!1},d(t){E(e,t)}}}function qt(t){let e,n,a,o;return e=new F({props:{noGutter:!0,$$slots:{default:[_t]},$$scope:{ctx:t}}}),a=new F({props:{$$slots:{default:[Yt]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment),n=T(),b(a.$$.fragment)},l(t){k(e.$$.fragment,t),n=L(t),k(a.$$.fragment,t)},m(t,s){M(e,t,s),l(t,n,s),M(a,t,s),o=!0},p(t,[n]){const o={};11&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o);const s={};11&n&&(s.$$scope={dirty:n,ctx:t}),a.$set(s)},i(t){o||(y(e.$$.fragment,t),y(a.$$.fragment,t),o=!0)},o(t){S(e.$$.fragment,t),S(a.$$.fragment,t),o=!1},d(t){E(e,t),t&&r(n),E(a,t)}}}const Qt=(t,e)=>({id:e.toString(),text:t});function Ut(t,e,n){let a;I(t,et,(t=>n(1,a=t)));let o="welcome";return[o,a,t=>{n(0,o=t.detail.selectedItem.text)}]}export default class extends t{constructor(t){super(),e(this,t,Ut,qt,n,{})}}

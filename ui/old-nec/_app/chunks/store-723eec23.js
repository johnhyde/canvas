var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,i=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))c.call(t,n)&&s(e,n,t[n]);return e},r=(e,a)=>t(e,n(a));import{C as l}from"./vendor-06f69df3.js";const p={chats:[],connection:"disconnected",canvasList:[],ship:window.ship,width:1500,height:1e3,gcp:null,s3:{configuration:{buckets:new Set,currentBucket:""},credentials:null}},{subscribe:u,update:f}=l(p);function d(e){console.log("[createCanvasStore]",e),f((t=>r(i({},t),{canvas:e,canvasList:Object.keys(e).filter((e=>"welcome"!==e))})))}function b(e){(function(e){return"string"==typeof e.accessKey&&"number"==typeof e.expiresIn})(e)&&(console.log("[loadGCPToken]",e),f((t=>r(i({},t),{gcp:{gcpToken:e}}))))}function v(e){console.log("[loadCanvas]",e),f((t=>r(i({},t),{canvas:i({[e.name]:{metadata:{name:e.name,template:e.template,location:e.location,saved:e.saved,width:e.width,height:e.height,private:e.private},data:e.data}},t.canvas),canvasList:[e.name,...t.canvasList]})))}function g(e){console.log("[painting]",e),f((t=>(e.strokes.forEach((n=>{console.log(n),t.canvas[e.name].data[n.id]=i({},n)})),t)))}function m(e){f((t=>r(i({},t),{connection:e})))}function h(e){f((t=>r(i({},t),{api:e})))}function y(e){f((t=>r(i({},t),{subscription:e})))}var w={subscribe:u};export{b as a,h as b,d as c,y as d,v as l,g as p,w as s,m as u};
